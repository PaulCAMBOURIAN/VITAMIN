#N canvas 166 213 1920 1011 10;
#N canvas 703 93 1220 1009 controls 0;
#X obj 188 -59 r midi;
#X obj 188 -20 midi-id_to_internal-message;
#X obj 121 -256 ctlin;
#X obj 110 -170 pack f f;
#X obj 110 -140 send midi;
#X obj 50 -56 r to_save;
#X obj 50 -30 print;
#X obj 188 208 s Vib-OnOff;
#X obj 402 91 s Vib-Vol;
#X obj 295 101 s Vib-Roughness;
#X obj 188 35 route Vib-OnOff Vib-Roughness Vib-Vol Snd-OnOff Snd-Roughness
Snd-Vol Viz-OnOff Viz-Roughness Viz-Vol, f 161;
#X obj 1044 90 s Viz-Vol;
#X obj 937 90 s Viz-Roughness;
#X obj 616 100 s Snd-Roughness;
#X obj 723 100 s Snd-Vol;
#X obj 250 -250 notein;
#X obj 281 225 r Vib-OnOff;
#X obj 281 250 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 280 271 r Vib-Roughness;
#X obj 280 296 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 280 465 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 391 250 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 390 296 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 390 465 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 498 250 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 497 296 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 497 465 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 391 225 r Snd-OnOff;
#X obj 390 271 r Snd-Roughness;
#X obj 497 271 r Viz-Roughness;
#X obj 498 225 r Viz-OnOff;
#X obj 280 440 r Vib-Vol;
#X obj 390 440 r Snd-Vol;
#X obj 497 440 r Viz-Vol;
#X obj 188 108 + 1;
#X obj 188 133 % 2;
#X msg 188 59 bang;
#X obj 188 84 f 0;
#X obj 188 155 sel 1;
#X obj 509 109 + 1;
#X obj 509 134 % 2;
#X msg 509 60 bang;
#X obj 509 85 f 0;
#X obj 509 156 sel 1;
#X obj 509 179 s Snd-OnOff;
#X obj 830 109 + 1;
#X obj 830 134 % 2;
#X msg 830 60 bang;
#X obj 830 85 f 0;
#X obj 830 156 sel 1;
#X obj 830 179 s Viz-OnOff;
#X text -50 90 this to avoid switching on on key down;
#X text -50 106 and switching off on key up;
#X text 290 120 controls the mix;
#X text 290 136 between clean sig;
#X text 290 152 and noise;
#X text 360 -20 reads in "mapping" file and associate input MIDI codes
(notes or controls) to local messages sorted by the following "route"
object;
#X obj 295 63 / 127;
#X obj 402 60 / 127;
#X obj 723 70 / 127;
#X obj 616 70 / 127;
#X obj 937 60 / 127;
#X obj 1044 60 / 127;
#X text 130 390 MONITOR -->;
#X text 190 180 bang on key down;
#X obj 660 260 r f0;
#X floatatom 660 285 5 0 0 0 - - -, f 5;
#X text 692 285 detected f0;
#X obj 660 309 ftom;
#X floatatom 660 334 5 0 0 0 - - -, f 5;
#X text 692 334 in midi;
#X floatatom 300 290 5 0 0 0 - - -, f 5;
#X floatatom 410 290 5 0 0 0 - - -, f 5;
#X floatatom 516 290 5 0 0 0 - - -, f 5;
#X floatatom 300 460 5 0 0 0 - - -, f 5;
#X floatatom 410 460 5 0 0 0 - - -, f 5;
#X floatatom 516 460 5 0 0 0 - - -, f 5;
#X obj 230 -130 s midi-chan;
#N canvas 385 289 1175 618 light-the-buttons 0;
#X obj 130 90 r Vib-OnOff;
#X obj 465 694 noteout;
#X obj 220 200 r midi-chan;
#X obj 130 115 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 130 138 sel 0 1;
#X obj 465 664 spigot;
#X obj 620 550 loadbang;
#X msg 560 605 1;
#X obj 473 202 r midi-chan;
#X obj 383 117 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 383 140 sel 0 1;
#X obj 383 92 r Snd-OnOff;
#X obj 711 196 r midi-chan;
#X obj 621 111 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 621 134 sel 0 1;
#X obj 621 86 r Viz-OnOff;
#X obj 120 310 pack 76 60 2;
#X obj 100 330 pack 75 60 2;
#X obj 80 350 pack 44 60 2;
#X obj 60 370 pack 43 60 2;
#X obj 313 372 pack 41 60 2;
#X obj 333 352 pack 42 60 2;
#X obj 353 332 pack 73 60 2;
#X obj 373 312 pack 74 60 2;
#X obj 611 306 pack 90 60 2;
#X obj 591 326 pack 89 60 2;
#X obj 571 346 pack 58 60 2;
#X obj 551 366 pack 57 60 2;
#X obj 641 366 pack 57 15 2;
#X obj 661 346 pack 58 15 2;
#X obj 681 326 pack 89 15 2;
#X obj 701 306 pack 90 15 2;
#X obj 463 312 pack 74 15 2;
#X obj 443 332 pack 73 15 2;
#X obj 423 352 pack 42 15 2;
#X obj 403 372 pack 41 15 2;
#X obj 150 370 pack 43 15 2;
#X obj 170 350 pack 44 15 2;
#X obj 190 330 pack 76 15 2;
#X obj 210 310 pack 75 15 2;
#X obj 640 610 delay 1000;
#X floatatom 510 240 5 0 0 0 - - -, f 5;
#X msg 682 642 76 15 1;
#X msg 672 662 75 15 1;
#X msg 660 680 44 15 1;
#X msg 650 700 43 15 1;
#X msg 764 642 74 15 1;
#X msg 754 662 73 15 1;
#X msg 742 680 42 15 1;
#X msg 732 700 41 15 1;
#X msg 854 642 90 15 1;
#X msg 844 662 89 15 1;
#X msg 832 680 58 15 1;
#X msg 822 700 57 15 1;
#X connect 0 0 3 0;
#X connect 2 0 16 2;
#X connect 2 0 17 2;
#X connect 2 0 18 2;
#X connect 2 0 19 2;
#X connect 2 0 36 2;
#X connect 2 0 37 2;
#X connect 2 0 38 2;
#X connect 2 0 39 2;
#X connect 3 0 4 0;
#X connect 4 0 36 0;
#X connect 4 0 37 0;
#X connect 4 0 38 0;
#X connect 4 0 39 0;
#X connect 4 1 16 0;
#X connect 4 1 17 0;
#X connect 4 1 18 0;
#X connect 4 1 19 0;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X connect 6 0 40 0;
#X connect 7 0 5 1;
#X connect 8 0 20 2;
#X connect 8 0 21 2;
#X connect 8 0 22 2;
#X connect 8 0 23 2;
#X connect 8 0 32 2;
#X connect 8 0 33 2;
#X connect 8 0 34 2;
#X connect 8 0 35 2;
#X connect 8 0 41 0;
#X connect 9 0 10 0;
#X connect 10 0 32 0;
#X connect 10 0 33 0;
#X connect 10 0 34 0;
#X connect 10 0 35 0;
#X connect 10 1 20 0;
#X connect 10 1 21 0;
#X connect 10 1 22 0;
#X connect 10 1 23 0;
#X connect 11 0 9 0;
#X connect 12 0 24 2;
#X connect 12 0 25 2;
#X connect 12 0 26 2;
#X connect 12 0 27 2;
#X connect 12 0 28 2;
#X connect 12 0 29 2;
#X connect 12 0 30 2;
#X connect 12 0 31 2;
#X connect 13 0 14 0;
#X connect 14 0 28 0;
#X connect 14 0 29 0;
#X connect 14 0 30 0;
#X connect 14 0 31 0;
#X connect 14 1 24 0;
#X connect 14 1 25 0;
#X connect 14 1 26 0;
#X connect 14 1 27 0;
#X connect 15 0 13 0;
#X connect 16 0 5 0;
#X connect 17 0 5 0;
#X connect 18 0 5 0;
#X connect 19 0 5 0;
#X connect 20 0 5 0;
#X connect 21 0 5 0;
#X connect 22 0 5 0;
#X connect 23 0 5 0;
#X connect 24 0 5 0;
#X connect 25 0 5 0;
#X connect 26 0 5 0;
#X connect 27 0 5 0;
#X connect 28 0 5 0;
#X connect 29 0 5 0;
#X connect 30 0 5 0;
#X connect 31 0 5 0;
#X connect 32 0 5 0;
#X connect 33 0 5 0;
#X connect 34 0 5 0;
#X connect 35 0 5 0;
#X connect 36 0 5 0;
#X connect 37 0 5 0;
#X connect 38 0 5 0;
#X connect 39 0 5 0;
#X connect 40 0 42 0;
#X connect 40 0 43 0;
#X connect 40 0 44 0;
#X connect 40 0 45 0;
#X connect 40 0 46 0;
#X connect 40 0 47 0;
#X connect 40 0 48 0;
#X connect 40 0 49 0;
#X connect 40 0 50 0;
#X connect 40 0 51 0;
#X connect 40 0 52 0;
#X connect 40 0 53 0;
#X connect 42 0 5 0;
#X connect 43 0 5 0;
#X connect 44 0 5 0;
#X connect 45 0 5 0;
#X connect 46 0 5 0;
#X connect 47 0 5 0;
#X connect 48 0 5 0;
#X connect 49 0 5 0;
#X connect 50 0 5 0;
#X connect 51 0 5 0;
#X connect 52 0 5 0;
#X connect 53 0 5 0;
#X restore 880 260 pd light-the-buttons;
#X floatatom 340 -170 5 0 0 0 - - -, f 5;
#X connect 0 0 1 0;
#X connect 1 0 10 0;
#X connect 2 0 3 1;
#X connect 2 1 3 0;
#X connect 2 2 77 0;
#X connect 3 0 4 0;
#X connect 10 0 36 0;
#X connect 10 1 57 0;
#X connect 10 2 58 0;
#X connect 10 3 41 0;
#X connect 10 4 60 0;
#X connect 10 5 59 0;
#X connect 10 6 47 0;
#X connect 10 7 61 0;
#X connect 10 8 62 0;
#X connect 15 0 3 0;
#X connect 15 0 79 0;
#X connect 15 1 3 1;
#X connect 15 2 77 0;
#X connect 16 0 17 0;
#X connect 18 0 19 0;
#X connect 18 0 71 0;
#X connect 27 0 21 0;
#X connect 28 0 22 0;
#X connect 28 0 72 0;
#X connect 29 0 25 0;
#X connect 29 0 73 0;
#X connect 30 0 24 0;
#X connect 31 0 20 0;
#X connect 31 0 74 0;
#X connect 32 0 23 0;
#X connect 32 0 75 0;
#X connect 33 0 26 0;
#X connect 33 0 76 0;
#X connect 34 0 35 0;
#X connect 34 0 37 1;
#X connect 35 0 38 0;
#X connect 36 0 37 0;
#X connect 37 0 34 0;
#X connect 38 0 7 0;
#X connect 39 0 40 0;
#X connect 39 0 42 1;
#X connect 40 0 43 0;
#X connect 41 0 42 0;
#X connect 42 0 39 0;
#X connect 43 0 44 0;
#X connect 45 0 46 0;
#X connect 45 0 48 1;
#X connect 46 0 49 0;
#X connect 47 0 48 0;
#X connect 48 0 45 0;
#X connect 49 0 50 0;
#X connect 57 0 9 0;
#X connect 58 0 8 0;
#X connect 59 0 14 0;
#X connect 60 0 13 0;
#X connect 61 0 12 0;
#X connect 62 0 11 0;
#X connect 65 0 66 0;
#X connect 66 0 68 0;
#X connect 68 0 69 0;
#X restore 10 -50 pd controls;
#X obj 1000 600 *~;
#X obj 1000 450 *~;
#X obj 1000 660 dac~ 1;
#N canvas 0 69 1920 1011 record 0;
#X text 1684 565 msec;
#X text 1623 566 sec;
#X text 1560 565 min;
#X text 1498 566 hours;
#X obj 1490 551 zexy/time, f 32;
#X obj 1463 501 r get_time;
#X obj 1670 250 textfile;
#X obj 1490 615 pack f f f f, f 32;
#X msg 1490 665 set add2 \$1 \$2 \$3 \$4;
#X obj 171 253 s get_time;
#X msg 130 301 set add \$1;
#X obj 130 360 s to_save;
#X obj 1670 204 r to_save;
#X obj 1490 725 s to_save;
#X obj 1463 525 t b b;
#X text 130 60 each control is received and written as one line in
the following format:;
#X text 130 90 <time> HH MM SS msmsms <name of control> <value>;
#X msg 130 326 add 0;
#X msg 1490 690 add2 16 17 16 938.453;
#X obj 323 250 s get_time;
#X msg 282 298 set add \$1;
#X obj 282 357 s to_save;
#X msg 282 323 add 0;
#X obj 474 249 s get_time;
#X msg 433 297 set add \$1;
#X obj 433 356 s to_save;
#X msg 433 322 add 1;
#X obj 120 200 r Vib-OnOff;
#X obj 423 200 r Viz-OnOff;
#X obj 272 200 r Snd-OnOff;
#X msg 306 273 add2 Snd-OnOff;
#X msg 457 272 add2 Viz-OnOff;
#X msg 154 276 add2 Vib-OnOff;
#X obj 173 459 s get_time;
#X msg 132 507 set add \$1;
#X obj 122 436 t b f b b;
#X obj 132 566 s to_save;
#X msg 132 532 add 0.00787402;
#X obj 325 456 s get_time;
#X msg 284 504 set add \$1;
#X obj 274 433 t b f b b;
#X obj 284 563 s to_save;
#X msg 284 529 add 0.0314961;
#X obj 476 455 s get_time;
#X msg 435 503 set add \$1;
#X obj 425 432 t b f b b;
#X obj 435 562 s to_save;
#X msg 435 528 add 0.00787402;
#X obj 173 659 s get_time;
#X msg 132 707 set add \$1;
#X obj 122 636 t b f b b;
#X obj 132 766 s to_save;
#X msg 132 732 add 0;
#X obj 325 656 s get_time;
#X msg 284 704 set add \$1;
#X obj 274 633 t b f b b;
#X obj 284 763 s to_save;
#X msg 284 729 add 0.00787402;
#X obj 476 655 s get_time;
#X msg 435 703 set add \$1;
#X obj 425 632 t b f b b;
#X obj 435 762 s to_save;
#X msg 435 728 add 0.00787402;
#X obj 122 406 r Vib-Vol;
#X msg 156 482 add2 Vib-Vol;
#X msg 308 479 add2 Snd-Vol;
#X obj 274 406 r Snd-Vol;
#X obj 425 406 r Viz-Vol;
#X msg 459 478 add2 Viz-Vol;
#X obj 425 606 r Viz-Roughness;
#X msg 459 678 add2 Viz-Roughness;
#X msg 308 679 add2 Snd-Roughness;
#X msg 156 682 add2 Vib-Roughness;
#X obj 870 290 key;
#X obj 870 315 sel 32;
#X obj 870 390 s to_save;
#X obj 870 340 t b b;
#X obj 920 340 s get_time;
#X text 840 260 Press <space> to add a marker;
#X obj 837 561 key;
#X obj 967 539 keyup;
#X obj 837 583 sel 27;
#X obj 967 562 sel 27;
#X msg 837 660 1;
#X obj 920 720 spigot;
#X obj 837 607 delay 1;
#X obj 839 700 keyname;
#X obj 840 730 spigot;
#X obj 967 612 t b b;
#X msg 967 640 add END_MARKER;
#X msg 868 680 add2 BEGIN_MARKER;
#X msg 994 660 0;
#X obj 837 632 t b b b, f 11;
#X obj 900 660 s get_time;
#X msg 920 749 add2 \$1;
#X obj 920 800 s to_save;
#X msg 870 365 add MARKER!!!;
#X text 820 500 Keep <escape> pressed and type a message;
#X text 820 520 /!/! don't use <space> within your message;
#X text 1660 180 get messages to feed textfile;
#X obj 122 606 r Vib-Roughness;
#X obj 274 606 r Snd-Roughness;
#X obj 1002 -163 r filename;
#X msg 1032 -33 set write \$1;
#X msg 1032 72 write test_27janv2021.txt;
#X msg 1041 -63 clear;
#X text 1072 -138 initalize upon reception of a filename;
#X text 1072 -118 filename is given as a message in the command line
call of pd (see README.md);
#X obj 1192 -68 loadbang;
#X msg 1192 -43 1;
#X text 1252 -58 and save the content of the buffer every 5 seconds
;
#X obj 1192 -18 metro 5000;
#X obj 1080 -160 print got a file name;
#X obj 1002 -103 t s b b;
#X msg 1090 -63 set;
#X obj 1042 107 s to_save;
#X msg 1225 10 1;
#X obj 1192 37 spigot;
#X text 1250 10 try to write on file only if a file name was provided
(avoid trying to write on previously given file name);
#X text 190 120 on each control reception:;
#X text 210 137 1- get and write timestamp;
#X text 210 153 2- write the name of the control;
#X text 211 169 3- write the state/value of the control;
#X text 1450 470 get and write the time stamp on each control reception
;
#X obj 1670 275 print message;
#X obj 272 227 t b b b b;
#X obj 283 265 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 134 266 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 437 259 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 120 230 t b b b b;
#X obj 423 226 t b b b b;
#X connect 4 0 7 0;
#X connect 4 1 7 1;
#X connect 4 2 7 2;
#X connect 4 3 7 3;
#X connect 5 0 14 0;
#X connect 6 0 124 0;
#X connect 7 0 8 0;
#X connect 8 0 18 0;
#X connect 10 0 17 0;
#X connect 12 0 6 0;
#X connect 14 0 18 0;
#X connect 14 1 4 0;
#X connect 17 0 11 0;
#X connect 18 0 13 0;
#X connect 20 0 22 0;
#X connect 22 0 21 0;
#X connect 24 0 26 0;
#X connect 26 0 25 0;
#X connect 27 0 129 0;
#X connect 28 0 130 0;
#X connect 29 0 125 0;
#X connect 30 0 21 0;
#X connect 31 0 25 0;
#X connect 32 0 11 0;
#X connect 34 0 37 0;
#X connect 35 0 37 0;
#X connect 35 1 34 0;
#X connect 35 2 64 0;
#X connect 35 3 33 0;
#X connect 37 0 36 0;
#X connect 39 0 42 0;
#X connect 40 0 42 0;
#X connect 40 1 39 0;
#X connect 40 2 65 0;
#X connect 40 3 38 0;
#X connect 42 0 41 0;
#X connect 44 0 47 0;
#X connect 45 0 47 0;
#X connect 45 1 44 0;
#X connect 45 2 68 0;
#X connect 45 3 43 0;
#X connect 47 0 46 0;
#X connect 49 0 52 0;
#X connect 50 0 52 0;
#X connect 50 1 49 0;
#X connect 50 2 72 0;
#X connect 50 3 48 0;
#X connect 52 0 51 0;
#X connect 54 0 57 0;
#X connect 55 0 57 0;
#X connect 55 1 54 0;
#X connect 55 2 71 0;
#X connect 55 3 53 0;
#X connect 57 0 56 0;
#X connect 59 0 62 0;
#X connect 60 0 62 0;
#X connect 60 1 59 0;
#X connect 60 2 70 0;
#X connect 60 3 58 0;
#X connect 62 0 61 0;
#X connect 63 0 35 0;
#X connect 64 0 36 0;
#X connect 65 0 41 0;
#X connect 66 0 40 0;
#X connect 67 0 45 0;
#X connect 68 0 46 0;
#X connect 69 0 60 0;
#X connect 70 0 61 0;
#X connect 71 0 56 0;
#X connect 72 0 51 0;
#X connect 73 0 74 0;
#X connect 74 0 76 0;
#X connect 76 0 96 0;
#X connect 76 1 77 0;
#X connect 79 0 81 0;
#X connect 80 0 82 0;
#X connect 81 0 85 0;
#X connect 82 0 88 0;
#X connect 83 0 84 1;
#X connect 84 0 94 0;
#X connect 85 0 92 0;
#X connect 86 0 87 1;
#X connect 86 1 87 0;
#X connect 87 0 84 0;
#X connect 88 0 89 0;
#X connect 88 1 91 0;
#X connect 89 0 95 0;
#X connect 90 0 95 0;
#X connect 91 0 84 1;
#X connect 92 0 83 0;
#X connect 92 1 90 0;
#X connect 92 2 93 0;
#X connect 94 0 95 0;
#X connect 96 0 75 0;
#X connect 100 0 50 0;
#X connect 101 0 55 0;
#X connect 102 0 112 0;
#X connect 102 0 113 0;
#X connect 102 0 116 0;
#X connect 103 0 104 0;
#X connect 104 0 115 0;
#X connect 105 0 115 0;
#X connect 108 0 109 0;
#X connect 109 0 111 0;
#X connect 111 0 117 0;
#X connect 113 0 103 0;
#X connect 113 1 105 0;
#X connect 113 2 114 0;
#X connect 114 0 104 0;
#X connect 116 0 117 1;
#X connect 117 0 104 0;
#X connect 125 0 22 0;
#X connect 125 1 126 0;
#X connect 125 2 30 0;
#X connect 125 3 19 0;
#X connect 126 0 20 0;
#X connect 127 0 10 0;
#X connect 128 0 24 0;
#X connect 129 0 17 0;
#X connect 129 1 127 0;
#X connect 129 2 32 0;
#X connect 129 3 9 0;
#X connect 130 0 26 0;
#X connect 130 1 128 0;
#X connect 130 2 31 0;
#X connect 130 3 23 0;
#X restore 10 10 pd record;
#N canvas 963 93 960 1009 init 0;
#X obj 70 10 loadbang;
#X obj 176 121 s cutofffreq-HIGH;
#X obj 316 121 s cutofffreq-LOW;
#X msg 176 76 500;
#X msg 316 81 30;
#X obj 47 271 s Vib-threshold-high;
#X obj 187 271 s Vib-threshold-low;
#X obj 106 183 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X msg 46 238 0;
#X msg 188 244 0;
#X connect 0 0 3 0;
#X connect 0 0 4 0;
#X connect 0 0 8 0;
#X connect 0 0 9 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 7 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 5 0;
#X connect 9 0 6 0;
#X restore 10 40 pd init;
#N canvas 323 401 1920 1036 SoundAnalysis 0;
#X obj 147 152 mtof;
#X obj 147 89 fiddle~ 4096 1 20 3;
#X obj 147 60 inlet~ InSignal;
#X obj 147 310 outlet audio_f0;
#X text 150 120 midi note;
#X text 150 180 frequency (Hz);
#X obj 147 271 line;
#X msg 147 220 \$1 1;
#X connect 0 0 7 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 6 0;
#X restore 860 240 pd SoundAnalysis;
#X obj 860 207 adc~ 1;
#N canvas 323 351 1920 1086 GenVibs 0;
#X obj 50 70 inlet Audio_f0;
#N canvas 67 51 1853 1023 hp_filt 0;
#X obj 243 377 hip~;
#X obj 243 405 hip~;
#X obj 243 437 hip~;
#X obj 243 556 outlet~;
#X obj 243 168 inlet~;
#X obj 330 270 inlet cutoff-freq;
#X obj 243 470 hip~;
#X obj 243 498 hip~;
#X obj 243 530 hip~;
#X text 380 460 6th order filter!!;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 4 0 0 0;
#X connect 5 0 0 1;
#X connect 5 0 1 1;
#X connect 5 0 2 1;
#X connect 5 0 6 1;
#X connect 5 0 7 1;
#X connect 5 0 8 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X restore 252 786 pd hp_filt;
#N canvas 64 54 1853 998 lp_filt 0;
#X obj 137 260 lop~;
#X obj 137 288 lop~;
#X obj 137 319 lop~;
#X obj 137 434 outlet~;
#X obj 137 148 inlet~;
#X obj 210 200 inlet cutoff-freq;
#X obj 137 348 lop~;
#X obj 137 376 lop~;
#X obj 137 407 lop~;
#X text 270 310 6th order filter!!;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 4 0 0 0;
#X connect 5 0 1 1;
#X connect 5 0 2 1;
#X connect 5 0 0 1;
#X connect 5 0 6 1;
#X connect 5 0 7 1;
#X connect 5 0 8 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X restore 252 832 pd lp_filt;
#X obj 309 760 r cutofffreq-LOW;
#X obj 309 800 r cutofffreq-HIGH;
#X obj 252 940 outlet~ sig;
#X text 260 740 then filter to stay in the tactile domain;
#X text 240 500 then mix to noise;
#X text 780 140 between 0 (full sig) to 1 (full noise);
#X obj 200 540 *~;
#X obj 400 530 *~;
#X obj 252 612 +~;
#N canvas 75 93 1848 1009 sig 0;
#X obj 362 10 inlet f;
#X obj 362 430 outlet~ sig;
#X text 350 140 shepard tone;
#X obj 362 155 shepard2 200 200;
#X connect 0 0 3 0;
#X connect 3 0 1 0;
#X restore 50 310 pd sig;
#X text 97 308 generate the "clean" signal;
#N canvas 75 68 1848 1009 noise 0;
#X obj 288 190 outlet~ noise;
#X obj 288 124 expr~ $v1 > $v2;
#X obj 375 61 abs~;
#X obj 375 0 / 100;
#X msg 375 -37 90;
#X obj 375 37 osc~;
#X obj 375 -58 loadbang;
#X text 311 152 very rough!;
#X text 288 1 impulse train;
#X text 270 99 40;
#X obj 288 99 phasor~ 35;
#X connect 1 0 0 0;
#X connect 2 0 1 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 4 0;
#X connect 10 0 1 0;
#X restore 400 302 pd noise;
#X text 453 301 generate the "noisy" sig;
#N canvas 75 93 1848 1009 get_mixture_params 0;
#X obj 668 279 route 0 1;
#X obj 669 217 t b f;
#X obj 712 189 loadbang;
#X obj 668 253 vbap, f 13;
#X msg 712 213 define_loudspeakers 2 -45 45;
#X obj 669 132 - 0.5;
#X obj 669 157 * 2;
#X obj 669 192 * 45;
#X obj 659 314 pack f f;
#X obj 659 347 unpack f f, f 29;
#X text 642 103 cosine mapping;
#X obj 470 50 inlet mix_command;
#X msg 659 394 \$1 2;
#X obj 659 419 line~;
#X obj 659 476 outlet~ sig_amp;
#X obj 830 476 outlet~ noise_amp;
#X msg 830 391 \$1 2;
#X obj 830 416 line~;
#X text 580 70 between 0 and 1;
#X connect 0 0 8 0;
#X connect 0 1 8 1;
#X connect 1 0 3 0;
#X connect 1 1 3 1;
#X connect 2 0 4 0;
#X connect 3 0 0 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 8 0 9 0;
#X connect 9 0 12 0;
#X connect 9 1 16 0;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 16 0 17 0;
#X connect 17 0 15 0;
#X restore 760 350 pd get_mixture_params;
#X obj 630 620 r Vib-Vol;
#X obj 252 890 *~;
#N canvas 809 93 908 984 Vibration-Intensity 0;
#X obj 155 60 inlet command;
#X obj 155 115 expr log($f1+1)/log(2);
#X text 300 90 log mapping;
#X msg 155 157 \$1 2;
#X obj 155 182 line~;
#X obj 155 261 outlet~ intensity;
#X text 176 90 between 0 and 1;
#X obj 155 207 *~;
#X obj 320 130 r Vib-Roughness;
#X obj 320 164 maxlib/scale 0 1 1 0.3;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 7 1;
#X restore 630 710 pd Vibration-Intensity;
#X obj 760 40 r Vib-Roughness;
#X text 780 330 default is cosine mapping (vbap method);
#X text 780 110 mix between clean sig & noise (roughness);
#X text 630 640 between 0 and 1;
#X text 640 670 default is log mapping;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 18 0;
#X connect 3 0 1 1;
#X connect 4 0 2 1;
#X connect 9 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 1 0;
#X connect 12 0 9 0;
#X connect 14 0 10 0;
#X connect 16 0 9 1;
#X connect 16 1 10 1;
#X connect 17 0 19 0;
#X connect 18 0 5 0;
#X connect 19 0 18 1;
#X connect 20 0 16 0;
#X restore 860 320 pd GenVibs;
#X text 80 10 track and record input from the user;
#X text 60 40 initialize patch;
#X text 196 60 put here the stuff aimed at testing the patch \, sending
values in & out \, etc.;
#X obj 1015 490 r Vib-OnOff;
#X msg 1050 387 1;
#N canvas 72 51 1848 1023 Vib-thresholds 0;
#X obj 320 260 env~;
#X obj 387 317 >;
#X obj 530 321 <;
#X obj 387 354 sel 1;
#X obj 530 355 sel 1;
#X obj 402 270 r Vib-threshold-high;
#X obj 545 270 r Vib-threshold-low;
#X obj 320 390 dbtorms;
#X obj 320 480 *;
#X obj 320 610 outlet~;
#X msg 387 383 1;
#X msg 530 384 0;
#X obj 320 550 line~;
#X msg 320 505 \$1 2;
#X obj 320 415 * 4;
#X text 240 417 arbitrary ->;
#X text 680 220 output = amplitude of the vibration signal;
#X obj 320 183 inlet~ AudioSig;
#X text 680 240 output is allowed only when the energy of the audio
signal is between thresh-HIGH and thresh-LOW;
#X text 680 270 otherwise output is 0;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 11 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 7 0 14 0;
#X connect 8 0 13 0;
#X connect 10 0 8 1;
#X connect 11 0 8 1;
#X connect 12 0 9 0;
#X connect 13 0 12 0;
#X connect 14 0 8 0;
#X connect 17 0 0 0;
#X restore 1015 310 pd Vib-thresholds;
#X text 1035 330 let the vib signal out only when the audio in has
its energy in a given interval;
#N canvas 580 93 983 960 USE_WITHOUT_MIDI_CONTROLLER 0;
#X obj 110 690 s cutofffreq-LOW;
#X obj 230 690 s cutofffreq-HIGH;
#X obj 37 147 s Vib-OnOff;
#X obj 37 126 tgl 13 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 220 230 s Vib-Vol;
#X obj 220 190 / 127;
#X obj 220 47 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 50 190 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X text 35 170 sig ....... to ...... noise;
#X obj 50 240 s Vib-Roughness;
#X floatatom 110 660 5 0 0 0 - - -, f 5;
#X floatatom 230 660 5 0 0 0 - - -, f 5;
#X text 50 640 filter the vib sig to make it fall into our perception
range;
#X obj 460 129 tgl 13 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 621 181 / 127;
#X obj 621 38 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 451 181 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 460 150 s Snd-OnOff;
#X obj 451 230 s Snd-Roughness;
#X obj 621 221 s Snd-Vol;
#X obj 814 100 tgl 13 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 975 152 / 127;
#X obj 975 9 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 805 152 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 814 121 s Viz-OnOff;
#X obj 805 205 s Viz-Roughness;
#X obj 975 192 s Viz-Vol;
#N canvas 6 51 1914 1023 EMULE_MIDI 0;
#X obj 505 189 send midi;
#X msg 455 -26 23 0;
#X msg 493 -26 23 1;
#X msg 456 -2 24 0;
#X msg 494 -2 24 1;
#X msg 456 21 25 0;
#X msg 494 21 25 1;
#X msg 456 69 27 0;
#X msg 495 69 27 1;
#X msg 454 43 26 0;
#X msg 492 43 26 1;
#X msg 458 93 28 0;
#X msg 496 93 28 1;
#X msg 455 121 29 0;
#X msg 494 120 29 1;
#X msg 457 145 30 0;
#X msg 495 145 30 1;
#X obj 332 130 pack f f;
#X obj 353 -79 vsl 15 128 0 127 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 187 -1 hradio 15 0 0 9 empty empty empty 0 -8 0 10 #fcfcfc #000000
#000000 0;
#X obj 187 22 + 1;
#X obj 353 62 t b f;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 0 0;
#X connect 6 0 0 0;
#X connect 7 0 0 0;
#X connect 8 0 0 0;
#X connect 9 0 0 0;
#X connect 10 0 0 0;
#X connect 11 0 0 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 14 0 0 0;
#X connect 15 0 0 0;
#X connect 16 0 0 0;
#X connect 17 0 0 0;
#X connect 18 0 21 0;
#X connect 19 0 20 0;
#X connect 20 0 17 0;
#X connect 21 0 17 0;
#X connect 21 1 17 1;
#X restore 512 522 pd EMULE_MIDI;
#X text 600 520 send MIDI messages directly;
#X text 600 537 will pass through the midi to messages utils;
#X text 610 554 not really useful...;
#X obj 451 204 / 127;
#X obj 50 213 / 127;
#X obj 805 175 / 127;
#X connect 3 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 32 0;
#X connect 10 0 0 0;
#X connect 11 0 1 0;
#X connect 13 0 17 0;
#X connect 14 0 19 0;
#X connect 15 0 14 0;
#X connect 16 0 31 0;
#X connect 20 0 24 0;
#X connect 21 0 26 0;
#X connect 22 0 21 0;
#X connect 23 0 33 0;
#X connect 31 0 18 0;
#X connect 32 0 9 0;
#X connect 33 0 25 0;
#X restore 10 70 pd USE_WITHOUT_MIDI_CONTROLLER;
#X obj 1015 570 line~;
#X obj 1050 412 sig~;
#X text 1080 397 bypass Vib-threshold;
#X text 680 217 VIBROTACTILE FEEDBACK;
#X text 170 220 AUDIO FEEDBACK;
#X obj 302 610 dac~ 2;
#X obj 220 280 adc~ 1;
#X obj 302 532 *~;
#N canvas 75 43 1848 1059 GenSounds 0;
#X obj 80 20 inlet~ pickup;
#X obj 202 350 outlet~;
#X obj 202 280 *~;
#N canvas 75 87 1848 1009 Snd-Intensity 0;
#X obj 651 -166 expr log($f1+1)/log(2);
#X text 802 -161 log mapping;
#X msg 651 -130 \$1 2;
#X obj 651 -105 line~;
#X obj 651 -58 outlet~ intensity;
#X obj 651 -210 inlet command;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 0 0;
#X restore 620 90 pd Snd-Intensity;
#X obj 620 34 r Snd-Vol;
#N canvas 75 43 1848 1059 Snd-Roughness 0;
#X obj 537 135 inlet~ pickup;
#X obj 539 595 outlet~ wet;
#X text 480 10 no dry/wet setting for now...;
#X text 480 30 so the "0 roughness" should really leave the input signal
unaltered;
#X obj 539 550 *~;
#X obj 573 409 osc~;
#X obj 539 370 *~;
#X obj 573 500 +~ 1;
#X obj 573 452 *~;
#X obj 554 304 loadbang;
#X msg 554 329 1;
#X obj 643 290 r Snd-Roughness;
#X obj 611 325 pow 0.33;
#X text 601 430 modulation amp;
#X text 541 350 carrier amp;
#X text 551 250 AM (amplitude modulation);
#X text 491 270 roughness controls modulation frequency and amplitude
;
#X obj 611 360 * 10;
#X obj 668 325 * 0.6;
#X text 701 330 * 0.85;
#X text 641 360 * 12;
#X text 611 340 pow 0.33;
#X connect 0 0 6 0;
#X connect 4 0 1 0;
#X connect 5 0 8 0;
#X connect 6 0 4 0;
#X connect 7 0 4 1;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 6 1;
#X connect 11 0 12 0;
#X connect 11 0 18 0;
#X connect 12 0 17 0;
#X connect 17 0 5 0;
#X connect 18 0 8 1;
#X restore 80 155 pd Snd-Roughness;
#X text -50 180 no dry/wet setting for now...;
#X text -50 200 so the "0 roughness" should really leave the input
signal unaltered;
#X text 630 110 map to output intensity;
#X text 720 90 <- select inside the mapping function;
#X text 630 60 between 0 and 1;
#X connect 0 0 5 0;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X restore 220 410 pd GenSounds;
#X text 260 280 guitar pickup comes here;
#X text 900 207 guitar pickup comes here;
#X text 1040 657 goes to the vibrator;
#X text 340 610 goes to the guitar amp;
#X text 960 240 get fundamental frequency;
#X text 90 -34 this NEEDS a "mapping" file;
#X text 1090 410 (for debuging purposes);
#X text 750 320 inside this one ->;
#X text 770 340 - choose the clean signal between;
#X text 790 368 - sine tone at f0;
#X text 790 398 - square tone at f0;
#X text 790 383 - sawtooth tone at f0;
#X text 865 300 f0;
#X text 762 419 - choose the noisy signal between;
#X text 782 433 - white noise;
#X text 782 447 - pink noise;
#X text 790 354 - shepard tone at f0 (DEFAULT);
#X text 782 462 - roughness 1 (DEFAULT);
#X text 782 477 - roughness 2;
#X text 90 -67 visualize incoming MIDI signals;
#X text 90 -50 get MIDI in \, convert MIDI into local messages;
#X text 100 410 inside this one ->;
#X text 30 430 - choose the roughness signal to;
#X text 42 445 be mixed to the direct signal;
#X text 70 510 - delay;
#X text 70 461 - Amplitude modulation (DEFAULT) \,;
#X text 80 477 roughness controls modulator's;
#X text 80 493 amplitude & frequency;
#X text 80 526 roughness controls delay time \,;
#X text 80 541 amount of feedback & dry/wet balance;
#X text 80 573 roughness controls the sag level;
#X text 80 588 & the distortion level;
#X text 80 620 roughness controls the drive level;
#X text 70 557 - disto1 (ladspa's valveRect);
#X text 70 604 - disto2 (ladspa's foverdrive);
#X text 78 651 roughness controls the drive level;
#X text 78 665 & the skew level;
#X text 68 635 - disto3 (ladspa's foldover);
#X text 1630 220 VISUAL FEEDBACK;
#N canvas 323 401 1920 1036 forward_viz_instructions 0;
#X obj 537 65 r Viz-Roughness;
#X obj 172 139 loadbang;
#X obj 442 129 * 100;
#X obj 442 79 r Viz-Vol;
#X msg 252 251 disconnect;
#X text 256 271 click me before connecting;
#X text 256 286 to someone else;
#X text 190 190 but leave port unchanged;
#X text 190 176 write your IP address in;
#X text 290 390 test if it worked: open a terminal & type:;
#X text 302 409 netcat -ulp 8327;
#X obj 441 229 mrpeach/packOSC;
#X obj 252 369 mrpeach/udpsend;
#X obj 750 408 mrpeach/unpackOSC;
#X floatatom 750 504 5 0 0 0 - - -, f 5;
#X floatatom 987 506 5 0 0 0 - - -, f 5;
#X floatatom 1224 505 5 0 0 0 - - -, f 5;
#X text 912 379 test if it worked...;
#X text 912 397 (stop listening with netcat -lup);
#X obj 943 145 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 943 120 r Viz-OnOff;
#X text 961 146 <- don't remove this \, it converts to floats!;
#X obj 750 479 mrpeach/routeOSC /revil/scene/group/shape/density_size
/revil/scene/group/shape/color /revil/scene/group/nimportequoi, f
119;
#X msg 357 201 sendtyped /revil/scene/group/shape/color fff 0 0 \$1
;
#X msg 533 134 sendtyped /revil/scene/group/shape/density_size f \$1
;
#X obj 537 87 t f f f;
#X msg 538 155 sendtyped /revil/scene/group/shape/density_ratio f \$1
;
#X msg 549 177 sendtyped /revil/scene/group/shape/density_curve_ratio
f \$1;
#X msg 943 182 send /revil/scene/group/visible \$1;
#X obj 652 107 expr -$f1*2+2;
#X msg 174 160 connect 10.42.0.1 8327;
#X obj 537 109 expr $f1*130+15;
#X obj 737 106 expr -$f1+1;
#X connect 0 0 25 0;
#X connect 1 0 30 0;
#X connect 2 0 23 0;
#X connect 3 0 2 0;
#X connect 4 0 12 0;
#X connect 11 0 12 0;
#X connect 13 0 22 0;
#X connect 19 0 28 0;
#X connect 20 0 19 0;
#X connect 22 0 14 0;
#X connect 22 1 15 0;
#X connect 22 2 16 0;
#X connect 23 0 11 0;
#X connect 24 0 11 0;
#X connect 25 0 31 0;
#X connect 25 1 29 0;
#X connect 25 2 32 0;
#X connect 26 0 11 0;
#X connect 27 0 11 0;
#X connect 28 0 11 0;
#X connect 29 0 26 0;
#X connect 30 0 12 0;
#X connect 31 0 24 0;
#X connect 32 0 27 0;
#X restore 1640 280 pd forward_viz_instructions;
#X obj 1120 560 env~;
#X floatatom 1120 585 5 0 0 0 - - -, f 5;
#X obj 317 430 r Snd-OnOff;
#X obj 317 455 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 317 502 line~;
#X msg 317 477 \$1 5;
#X obj 1015 515 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X msg 1015 545 \$1 5;
#X obj 870 260 s f0;
#X obj 318 326 env~;
#X floatatom 318 351 5 0 0 0 - - -, f 5;
#X connect 1 0 3 0;
#X connect 1 0 66 0;
#X connect 2 0 1 0;
#X connect 6 0 8 0;
#X connect 6 0 74 0;
#X connect 7 0 6 0;
#X connect 7 0 14 0;
#X connect 8 0 2 0;
#X connect 12 0 72 0;
#X connect 13 0 18 0;
#X connect 14 0 2 1;
#X connect 17 0 1 1;
#X connect 18 0 2 1;
#X connect 23 0 25 0;
#X connect 23 0 75 0;
#X connect 24 0 22 0;
#X connect 25 0 24 0;
#X connect 66 0 67 0;
#X connect 68 0 69 0;
#X connect 69 0 71 0;
#X connect 70 0 24 1;
#X connect 71 0 70 0;
#X connect 72 0 73 0;
#X connect 73 0 17 0;
#X connect 75 0 76 0;
